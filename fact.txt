jmp main

main:
    in
    pop rdx
    push 0
    push rdx
    jae gofact          ;если введенное значение меньше 0, то не прыгаем и завершаем программу
    hlt

gofact:         
    push 1
    pop rax
    CALL factorial      ;вызываем функцию подсчета факториала
    push rax
    out
    hlt

factorial:
    push rax
    push rdx
    mul
    pop rax

    push rdx
    push 1
    sub
    pop rdx

    push 0
    push rdx
    je return
    pop rdx
    call factorial


return:
    ret